<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šå¤©åƒä»€éº¼ï¼Ÿ(æ‹‰éœ¸æ©Ÿç‰ˆ)</title>
    <style>
        /* --- CSS æ¨£å¼å€åŸŸ --- */
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #2b2b2b; /* æ”¹æˆæ·±è‰²èƒŒæ™¯ï¼Œçªé¡¯æ©Ÿå° */
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 450px;
            margin-top: 30px;
            padding: 25px;
            background: #f4f4f4;
            border-radius: 20px;
            /* æ©Ÿå°ç«‹é«”æ„Ÿ */
            box-shadow: 
                inset 0 0 20px rgba(255,255,255,0.5),
                0 10px 30px rgba(0,0,0,0.5);
            border: 8px solid #444;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px dashed #aaa;
            padding-bottom: 10px;
        }

        .group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 1rem;
        }

        /* --- é¸é …æŒ‰éˆ•æ¨£å¼ --- */
        .btn-group { display: flex; gap: 10px; }
        .btn-group input[type="radio"] { display: none; }
        
        .btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #ccc;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            background: #e8e8e8;
            font-weight: bold;
        }

        input[type="radio"]:checked + .btn {
            background-color: #ffcc00; /* é»ƒè‰²äº®ç‡ˆæ„Ÿ */
            color: #333;
            border-color: #ffaa00;
            box-shadow: 0 0 10px #ffcc00;
            transform: scale(1.02);
        }

        /* --- å„ªåŒ–å¾Œçš„é‡‘é¡æ»‘æ¡¿ --- */
        .budget-container {
            background: #ddd;
            padding: 15px;
            border-radius: 10px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        input[type="range"] {
            width: 100%;
            height: 10px;
            background: #888;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
            margin: 15px 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #ff4757;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.2); }

        .price-display {
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            color: #d63031;
            margin-top: 5px;
        }

        /* --- æ‹‰éœ¸æ©Ÿè¢å¹• --- */
        .slot-machine-screen {
            background-color: #000;
            border: 5px solid #666;
            border-radius: 10px;
            height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px #000;
        }

        /* è¢å¹•åå…‰æ•ˆæœ */
        .slot-machine-screen::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 50%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }

        .screen-text {
            color: #00ff00; /* å¾©å¤ç¶ è‰²è¢å¹•å­— */
            font-family: 'Courier New', monospace; /* ç­‰å¯¬å­—é«”æ›´æœ‰æ•¸ä½æ„Ÿ */
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            padding: 0 10px;
            text-shadow: 0 0 5px #00ff00;
        }

        .screen-subtext {
            color: #00cc00;
            font-size: 0.9rem;
            margin-top: 5px;
            opacity: 0.8;
        }

        /* ä¸­çé–ƒçˆç‰¹æ•ˆ */
        @keyframes blink {
            0% { color: #00ff00; text-shadow: 0 0 5px #00ff00; }
            50% { color: #fff; text-shadow: 0 0 20px #fff; }
            100% { color: #00ff00; text-shadow: 0 0 5px #00ff00; }
        }
        .winner-effect {
            animation: blink 0.5s infinite;
        }

        /* --- æ‹‰éœ¸æ‰‹æŠŠæŒ‰éˆ• --- */
        #drawBtn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(to bottom, #ff4757, #c0392b);
            color: white;
            border: none;
            border-radius: 50px; /* åœ“æ½¤æŒ‰éˆ• */
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 6px 0 #802620, 0 15px 20px rgba(0,0,0,0.2);
            transition: all 0.1s;
            text-transform: uppercase;
        }

        #drawBtn:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #802620, inset 0 5px 10px rgba(0,0,0,0.2);
        }
        
        #drawBtn:disabled {
            background: #999;
            box-shadow: none;
            cursor: not-allowed;
            transform: translateY(6px);
        }

        /* --- çµæœæ“ä½œæŒ‰éˆ•å€ --- */
        .action-area {
            display: none; /* é è¨­éš±è—ï¼ŒæŠ½å®Œæ‰é¡¯ç¤º */
            margin-top: 15px;
            gap: 10px;
            flex-direction: column;
        }

        .map-btn {
            background: #3498db;
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-decoration: none;
            text-align: center;
            font-weight: bold;
            display: block;
        }
        
        .retry-btn {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ± FOOD SLOT ğŸ°</h1>
        
        <div class="group">
            <label>å£å‘³</label>
            <div class="btn-group">
                <input type="radio" id="savory" name="flavor" value="é¹¹" checked>
                <label for="savory" class="btn">ğŸœ é¹¹é£Ÿ</label>
                
                <input type="radio" id="sweet" name="flavor" value="ç”œ">
                <label for="sweet" class="btn">ğŸ° ç”œé»</label>
            </div>
        </div>

        <div class="group">
            <label>æº«åº¦</label>
            <div class="btn-group">
                <input type="radio" id="hot" name="temp" value="ç†±" checked>
                <label for="hot" class="btn">ğŸ”¥ ç†±å‘¼å‘¼</label>
                
                <input type="radio" id="cold" name="temp" value="å†·">
                <label for="cold" class="btn">â„ï¸ é€å¿ƒæ¶¼</label>
            </div>
        </div>

        <div class="group">
            <label>é ç®—é™åˆ¶</label>
            <div class="budget-container">
                <div id="priceDisplay" class="price-display">NT$ 0 - 150</div>
                <input type="range" id="budget" min="1" max="4" value="1" step="1">
            </div>
        </div>

        <div class="slot-machine-screen">
            <div id="screenMain" class="screen-text">READY?</div>
            <div id="screenSub" class="screen-subtext">è«‹æŒ‰ä¸‹æ–¹æŒ‰éˆ•</div>
        </div>

        <button id="drawBtn">ğŸ° SPIN !</button>

        <div id="actionArea" class="action-area">
            <a id="mapLink" href="#" target="_blank" class="map-btn">ğŸ“ ç”¨ Google åœ°åœ–æ‰¾é€™é …</a>
            <button id="retryBtn" class="retry-btn">ğŸ˜– ä¸å–œæ­¡ï¼Œå†è½‰ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // --- 1. é£Ÿç‰©è³‡æ–™åº« ---
        // price å°æ‡‰: 1(å¹³åƒ¹), 2(ä¸€èˆ¬), 3(å¤§é¤), 4(è±ªè¯)
        const foodDatabase = [
            // é¹¹ + ç†±
            { name: "æ»·è‚‰é£¯", price: 1, flavor: "é¹¹", temp: "ç†±" },
            { name: "é›è‚‰é£¯", price: 1, flavor: "é¹¹", temp: "ç†±" },
            { name: "éº¥ç•¶å‹", price: 2, flavor: "é¹¹", temp: "ç†±" },
            { name: "å°ç«é‹", price: 2, flavor: "é¹¹", temp: "ç†±" },
            { name: "ç‰›è‚‰éºµ", price: 2, flavor: "é¹¹", temp: "ç†±" },
            { name: "æ—¥å¼æ‹‰éºµ", price: 3, flavor: "é¹¹", temp: "ç†±" },
            { name: "éŸ“å¼ç‚¸é›", price: 3, flavor: "é¹¹", temp: "ç†±" },
            { name: "éµæ¿ç‡’", price: 3, flavor: "é¹¹", temp: "ç†±" },
            { name: "ç‹å“ç‰›æ’", price: 4, flavor: "é¹¹", temp: "ç†±" },
            { name: "é«˜ç´šéº»è¾£é‹", price: 4, flavor: "é¹¹", temp: "ç†±" },
            
            // é¹¹ + å†·
            { name: "æ¶¼éºµ", price: 1, flavor: "é¹¹", temp: "å†·" },
            { name: "å¾¡é£¯ç³°", price: 1, flavor: "é¹¹", temp: "å†·" },
            { name: "æ½›è‰‡å ¡", price: 2, flavor: "é¹¹", temp: "å†·" },
            { name: "å£½å¸æ‹¼ç›¤", price: 3, flavor: "é¹¹", temp: "å†·" },
            { name: "ç”Ÿé­šç‰‡ä¸¼é£¯", price: 3, flavor: "é¹¹", temp: "å†·" },
            { name: "Omakase (ç„¡èœå–®å£½å¸)", price: 4, flavor: "é¹¹", temp: "å†·" },

            // ç”œ + ç†±
            { name: "ç´…è±†é¤…", price: 1, flavor: "ç”œ", temp: "ç†±" },
            { name: "ç‡’ä»™è‰", price: 1, flavor: "ç”œ", temp: "ç†±" },
            { name: "ç†±å¯å¯", price: 2, flavor: "ç”œ", temp: "ç†±" },
            { name: "èˆ’èŠ™è•¾é¬†é¤…", price: 3, flavor: "ç”œ", temp: "ç†±" },
            { name: "ç¾çƒ¤å¸ƒæœ—å°¼", price: 3, flavor: "ç”œ", temp: "ç†±" },

            // ç”œ + å†·
            { name: "æ‰‹æ–é£²", price: 1, flavor: "ç”œ", temp: "å†·" },
            { name: "ä¾¿åˆ©å•†åº—éœœæ·‡æ·‹", price: 1, flavor: "ç”œ", temp: "å†·" },
            { name: "å‰‰å†°", price: 2, flavor: "ç”œ", temp: "å†·" },
            { name: "åˆ‡ç‰‡è›‹ç³•", price: 2, flavor: "ç”œ", temp: "å†·" },
            { name: "å“ˆæ ¹é”æ–¯", price: 3, flavor: "ç”œ", temp: "å†·" },
            { name: "äº”æ˜Ÿé£¯åº—ä¸‹åˆèŒ¶", price: 4, flavor: "ç”œ", temp: "å†·" }
        ];

        // --- 2. è®Šæ•¸èˆ‡åˆå§‹åŒ– ---
        const budgetInput = document.getElementById('budget');
        const priceDisplay = document.getElementById('priceDisplay');
        const drawBtn = document.getElementById('drawBtn');
        const retryBtn = document.getElementById('retryBtn');
        const screenMain = document.getElementById('screenMain');
        const screenSub = document.getElementById('screenSub');
        const actionArea = document.getElementById('actionArea');
        const mapLink = document.getElementById('mapLink');

        // é‡‘é¡é¡¯ç¤ºæ–‡å­—å°ç…§è¡¨
        const priceRanges = [
            "NT$ 0 - 150",     // Level 1
            "NT$ 150 - 500",   // Level 2
            "NT$ 500 - 1500",  // Level 3
            "NT$ 1500 - 10000+"// Level 4
        ];

        // ç›£è½æ»‘æ¡¿ï¼šæ›´æ–°é¡¯ç¤ºé‡‘é¡
        budgetInput.addEventListener('input', function() {
            const level = parseInt(this.value);
            priceDisplay.textContent = priceRanges[level - 1];
        });

        // ç›£è½æŒ‰éˆ•
        drawBtn.addEventListener('click', startSlotMachine);
        retryBtn.addEventListener('click', startSlotMachine);

        // --- 3. æ‹‰éœ¸æ©Ÿæ ¸å¿ƒé‚è¼¯ ---
        function startSlotMachine() {
            // å–å¾—ç•¶å‰ç¯©é¸æ¢ä»¶
            const flavor = document.querySelector('input[name="flavor"]:checked').value;
            const temp = document.querySelector('input[name="temp"]:checked').value;
            const budgetLevel = parseInt(budgetInput.value);

            // ç¯©é¸é£Ÿç‰© (é‚è¼¯ï¼šåƒ¹æ ¼ <= é¸å®šçš„é ç®—)
            const candidates = foodDatabase.filter(food => {
                return food.flavor === flavor && 
                       food.temp === temp && 
                       food.price <= budgetLevel;
            });

            if (candidates.length === 0) {
                screenMain.textContent = "ç„¡ç›¸ç¬¦é …ç›®";
                screenSub.textContent = "è«‹èª¿æ•´æ¢ä»¶";
                return;
            }

            // ç‹€æ…‹é‡ç½®
            actionArea.style.display = 'none'; // éš±è—çµæœæŒ‰éˆ•
            drawBtn.disabled = true;           // é–å®šæŒ‰éˆ•é˜²æ­¢é€£é»
            screenMain.classList.remove('winner-effect'); // ç§»é™¤é–ƒçˆ
            screenSub.textContent = "CALCULATING...";

            // å‹•ç•«è¨­å®š
            let counter = 0;
            const animationDuration = 3000; // è½‰å‹•æŒçºŒæ™‚é–“ (æ¯«ç§’) = 3ç§’
            const spinIntervalSpeed = 80;   // æ–‡å­—è·³å‹•é€Ÿåº¦ (æ¯«ç§’)

            // é–‹å§‹å¿«é€Ÿè·³å‹•æ–‡å­— (Spinning effect)
            const spinInterval = setInterval(() => {
                const randomTemp = candidates[Math.floor(Math.random() * candidates.length)];
                screenMain.textContent = randomTemp.name;
                counter += spinIntervalSpeed;
            }, spinIntervalSpeed);

            // æ™‚é–“åˆ°ï¼Œåœæ­¢ä¸¦é¡¯ç¤ºçµæœ
            setTimeout(() => {
                clearInterval(spinInterval); // åœæ­¢è·³å‹•
                
                // é¸å‡ºæœ€çµ‚çµæœ
                const finalChoice = candidates[Math.floor(Math.random() * candidates.length)];
                
                // é¡¯ç¤ºçµæœ
                screenMain.textContent = finalChoice.name;
                screenSub.textContent = `${finalChoice.flavor} | ${finalChoice.temp} | é ç®—ç­‰ç´š:${finalChoice.price}`;
                
                // æ·»åŠ ä¸­çç‰¹æ•ˆ
                screenMain.classList.add('winner-effect');
                
                // è§£é–æŒ‰éˆ•èˆ‡é¡¯ç¤ºåœ°åœ–é€£çµ
                drawBtn.disabled = false;
                drawBtn.textContent = "ğŸ° SPIN AGAIN";
                actionArea.style.display = 'flex'; // é¡¯ç¤ºåœ°åœ–/é‡æŠ½æŒ‰éˆ•
                
                // è¨­å®šåœ°åœ–é€£çµ
                mapLink.href = `http://googleusercontent.com/maps.google.com/search?q=${encodeURIComponent(finalChoice.name)}`;

            }, animationDuration);
        }
    </script>
</body>
</html>
